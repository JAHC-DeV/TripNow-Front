<div class="trips-container">
  <!-- Header con controles -->
  <div class="trips-header">
    <div class="header-content">
      <h1>锔 Reservas de Viajes</h1>
      <p class="subtitle">Gestiona todas tus reservas en un solo lugar</p>
    </div>
  </div>

  <!-- Secci贸n de informaci贸n de carga/error -->
  @if (reservationService.loading()) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Cargando reservas...</p>
    </div>
  } @else if (reservationService.error()) {
    <div class="error-state">
      <div class="error-icon">锔</div>
      <p class="error-message">{{ reservationService.error() }}</p>
      <button class="btn btn-secondary" (click)="reload()"> Reintentar</button>
    </div>
  } @else if (reservationService.reservations().length === 0) {
    <div class="empty-state">
      <div class="empty-icon"></div>
      <h3>No hay reservas a煤n</h3>
      <p>隆Crea tu primera reserva para comenzar!</p>
      <button class="btn btn-primary" (click)="openCreateModal()">
         Crear Primera Reserva
      </button>
    </div>
  } @else {
    <!-- Tabla responsive con animaciones -->
    <div class="table-wrapper">
      <table class="trips-table" role="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Email</th>
            <th>Pa铆s</th>
            <th>Personas</th>
            <th>Estado</th>
            <th>Riesgo</th>
            <th>Fecha Creaci贸n</th>
          </tr>
        </thead>
        <tbody>
          @for (trip of reservationService.reservations(); track trip.id; let i = $index) {
            <tr [class]="getStatusClass(trip.status)" (click)="openDetail(trip.id)"  [style.animation-delay]="i * 0.05 + 's'">
              <td data-label="ID">{{ trip.id }}</td>
              <td data-label="Email">{{ trip.customerEmail }}</td>
              <td data-label="Pa铆s">{{ trip.tripCountry }}</td>
              <td data-label="Personas" class="text-center">{{ trip.amount }}</td>
              <td data-label="Estado">
                <span class="status-badge" [class]="getStatusClass(trip.status)">
                  {{ getStatusLabel(trip.status) }}
                </span>
              </td>
              <td data-label="Riesgo" class="text-center">
                <div class="risk-score" [class]="'risk-' + getRiskLevel(trip.riskScore)">
                  {{ trip.riskScore.toFixed(2) }}%
                </div>
              </td>
              <td data-label="Fecha Creaci贸n">
                {{ trip.createdAt | date: 'short' }}
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Footer con informaci贸n -->
    <div class="table-footer">
      <p>Total de reservas: <strong>{{ reservationService.totalReservations() }}</strong></p>
    </div>
  }
</div>

<!-- Bot贸n flotante siempre disponible -->
<button
  class="fab-button"
  (click)="openCreateModal()"
  title="Crear nueva reserva"
  aria-label="Crear nueva reserva"
>
  <span class="fab-icon">+</span>
</button>

<!-- Modal para crear reserva -->
<app-create-reservation-modal #createModal />

<!-- Modal para detalles de la reserva -->
<app-reservation-detail-modal #detailModal />

